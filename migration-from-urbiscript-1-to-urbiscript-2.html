<?xml version="1.0" encoding="utf8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->
<html xmlns="http://www.w3.org/1999/xhtml"
>
<head><title>16 Migration from urbiscript 1 to urbiscript 2</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf8" />
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" />
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" />
<!-- 2,xhtml,info,next,sections+,mouseover,uni-html4,charset=utf8 -->
<meta name="src" content="urbi-sdk.tex" />
<meta name="date" content="2016-05-08 14:32:00" />
<link rel="stylesheet" type="text/css" href="urbi-sdk.css" />
<script type="text/javascript" src="urbi-sdk-js.js"></script>
<script type="text/javascript" src="overlib.js"><!-- overLIB (c) Erik Bosrup --></script> <!--http://www.bosrup.com/web/overlib/--></head><body
><div id="overDiv" style="position:absolute; visibility:hidden; z-index:1000;"></div>
<div class="header">
   <a href="index-of-terms.html">Index</a><a
href="migration-from-urbiscript-2-to-urbiscript-3.html" >Next</a><a
href="guidelines-and-cook-books.html#migration-from-urbiscript-1-to-urbiscript-2.html" >Up</a><a
href="urbi-guideline.html" >Previous</a><a href="index.html">Urbi SDK 3.0.0</a></div><h2 class="chapterHead"><span class="titlemark">Chapter 16</span><br /><a
href="index.html#QQ2-25-169" id="x25-16200016">Migration from urbiscript 1 to urbiscript 2</a></h2>
<!--l. 12--><p class="noindent" >This chapter is intended to people who want to migrate programs in urbiscript 1 to urbiscript 2.
Backward compatibility is <span
class="cmti-10x-x-109">mostly </span>ensured, but some urbiscript 1 constructs were removed because they
prevented the introduction of cleaner constructs in urbiscript 2. When possible, urbiscript 2 supports
the remaining urbiscript 1 constructs. The <a
href="urbiscript-standard-library.html#object:Kernel1"><span class="lstinline"><span
class="cmtt-10x-x-109">Kernel1</span></span></a> object contains functions that support some
urbiscript 1 features.
</p>
   <div class="sectionTOCS">
    <span class="sectionToc" >16.1 <a
href="#x25-16300016.1">$(Foo)</a></span>
<br />    <span class="sectionToc" >16.2 <a
href="#x25-16400016.2">delete Foo</a></span>
<br />    <span class="sectionToc" >16.3 <a
href="#x25-16500016.3">emit Foo</a></span>
<br />    <span class="sectionToc" >16.4 <a
href="#x25-16600016.4">eval(Foo)</a></span>
<br />    <span class="sectionToc" >16.5 <a
href="#x25-16700016.5">foreach</a></span>
<br />    <span class="sectionToc" >16.6 <a
href="#x25-16800016.6">group</a></span>
<br />    <span class="sectionToc" >16.7 <a
href="#x25-16900016.7">loopn</a></span>
<br />    <span class="sectionToc" >16.8 <a
href="#x25-17000016.8">new Foo</a></span>
<br />    <span class="sectionToc" >16.9 <a
href="#x25-17100016.9">self</a></span>
<br />    <span class="sectionToc" >16.10 <a
href="#x25-17200016.10">stop Foo</a></span>
<br />    <span class="sectionToc" >16.11 <a
href="#x25-17300016.11"># line</a></span>
<br />    <span class="sectionToc" >16.12 <a
href="#x25-17400016.12">tag+end</a></span>
   </div>
   <h3 class="sectionHead"><span class="titlemark">16.1   </span> <a
href="index.html#QQ2-25-170" id="x25-16300016.1">$(Foo)</a></h3>
<!--l. 24--><p class="noindent" >This construct was designed to build identiﬁers at run-time. This used to be a common idiom to work
around some limitations of urbiscript 1 which are typically <span
class="cmti-10x-x-109">no longer needed in urbiscript 2</span>. For
instance, genuine local variables are simpler and safer to use than identiﬁers forged by hand to be
unique. In order to associate information to a string, use a <a
href="urbiscript-standard-library.html#object:Dictionary"><span class="lstinline"><span
class="cmtt-10x-x-109">Dictionary</span></span></a>.
</p><!--l. 31--><p class="indent" >   If you really need to forge identiﬁers at run-time, use <span class="lstinline"><span
class="cmtt-10x-x-109">setSlot</span></span>, <span class="lstinline"><span
class="cmtt-10x-x-109">updateSlot</span></span>, and <span class="lstinline"><span
class="cmtt-10x-x-109">getSlot</span></span>, which
all work with strings, and possibly <span class="lstinline"><span
class="cmtt-10x-x-109">asString</span></span>, which converts arbitrary expressions into strings. The
following table lists common patterns.
</p>
<div class="center"
>
<!--l. 37--><p class="noindent" >
</p>
<div class="tabular"> <table id="TBL-2" class="tabular"
cellspacing="0" cellpadding="0" rules="groups"
><colgroup id="TBL-2-1g"><col
id="TBL-2-1" /></colgroup><colgroup id="TBL-2-2g"><col
id="TBL-2-2" /></colgroup><tr
class="hline"><td><hr /></td><td><hr /></td></tr><tr
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-1"
class="td11"> <span
class="cmbx-10x-x-109">Deprecated         </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-2"
class="td11"> <span
class="cmbx-10x-x-109">Updated                               </span></td>
</tr><tr
class="hline"><td><hr /></td><td><hr /></td></tr><tr
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-1"
class="td11"> <span class="lstinline"><!--l. 42--><p class="noindent" ><span class="textkwd"><span
class="cmtt-10x-x-109">var</span></span><span class="cmtt-10x-x-109"> $(Foo) = ...;</span>                                                               </span> </p> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-2"
class="td11"> <span class="lstinline"><!--l. 42--><p class="noindent" ><span class="cmtt-10x-x-109">setSlot(Foo.asString, ...);</span>                       </span> </p> </td>
</tr><tr
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-1"
class="td11"> <span class="lstinline"><!--l. 43--><p class="noindent" ><span class="cmtt-10x-x-109">$(Foo) = ...;</span>                                                                   </span> </p> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-2"
class="td11"> <span class="lstinline"><!--l. 43--><p class="noindent" ><span class="cmtt-10x-x-109">updateSlot(Foo.asString, ...);</span>                       </span> </p> </td>
</tr><tr
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-1"
class="td11"> <span class="lstinline"><!--l. 44--><p class="noindent" ><span class="cmtt-10x-x-109">$(Foo)</span>                                                                          </span> </p> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-2"
class="td11"> <span class="lstinline"><!--l. 44--><p class="noindent" ><span class="cmtt-10x-x-109">getSlot(Foo.asString);</span>                       </span> </p> </td>
</tr><tr
class="hline"><td><hr /></td><td><hr /></td></tr><tr
 style="vertical-align:baseline;" id="TBL-2-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-1"
class="td11">                   </td></tr></table></div></div>
<!--l. 49--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">16.2   </span> <a
href="index.html#QQ2-25-171" id="x25-16400016.2">delete Foo</a></h3>
<!--l. 51--><p class="noindent" >In order to maintain an analogy with the C++ language, urbiscript used to support <span class="lstinline"><span class="cmtt-10x-x-109">delete Foo</span></span>, but
this was removed for a number of reasons: </p>
     <ul class="itemize1">
     <li class="itemize">urbiscript 2 features genuine local variables for which <span class="lstinline"><span
class="cmtt-10x-x-109">delete</span></span> makes no sense.
     </li>
     <li class="itemize">in C++ <span class="lstinline"><span
class="cmtt-10x-x-109">delete</span></span> really targets the object: destroy yourself, then the system will reclaim
     the memory. In urbiscript one cannot destroy an object and reclaim the memory, it is the
     task of the system to notice objects that are no longer used, and to reclaim the memory.
     This is called <span
class="cmti-10x-x-109">garbage collection</span><a
 id="x25-164001"></a>. Therefore in urbiscript <span class="lstinline"><span
class="cmtt-10x-x-109">delete</span></span> is actually bounced to
     <a
href="urbiscript-standard-library.html#slot:Object.removeLocalSlot"><span class="lstinline"><span class="cmtt-10x-x-109">Object.removeLocalSlot</span></span></a> sent to the owner of the object.
     </li>
     <li class="itemize"><span class="lstinline"><span
class="cmtt-10x-x-109">delete</span></span> is an unsafe feature that makes only sense in pointer-based languages such as C and
     C++. It enables nice bugs such as: <div class="code urbiunchecked">
        <!--l. 67--><pre class="listings"><span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-164002r1"></a></span><span class="textkwd"><span
class="cmtt-10x-x-109">var</span></span><span
class="cmtt-10x-x-109"> </span><span class="textkwd"><span
class="cmtt-10x-x-109">this</span></span><span class="cmtt-10x-x-109">.a := A.new; </span><br /><span class="label"><a
 id="x25-164003r2"></a></span><!--l. 69--><span class="listings-nested"><span class="textcmt"><span class="cmtt-10x-x-109">// ...</span></span></span><span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-164004r3"></a></span><span class="cmtt-10x-x-109">delete </span><span class="textkwd"><span
class="cmtt-10x-x-109">this</span></span><span class="cmtt-10x-x-109">.a; </span><br /><span class="label"><a
 id="x25-164005r4"></a></span><!--l. 71--><span class="listings-nested"><span class="textcmt"><span class="cmtt-10x-x-109">// ...</span></span></span><span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-164006r5"></a></span><span class="cmtt-10x-x-109">cout &#x003C;&#x003C; </span><span class="textkwd"><span
class="cmtt-10x-x-109">this</span></span><span class="cmtt-10x-x-109">.a;</span>
        <span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-164007r6"></a></span></pre>
     </div>
     </li></ul>
<!--l. 76--><p class="indent" >   For these reasons, and others, <span class="lstinline"><span class="cmtt-10x-x-109">delete Foo</span></span> was removed. To remove the <span
class="cmti-10x-x-109">name </span>Foo, run
<span class="lstinline"><span class="cmtt-10x-x-109">removeLocalSlot(</span><span class="textstr"><span class="cmtt-10x-x-109">&#x0022;Foo&#x0022;</span></span><span
class="cmtt-10x-x-109">)</span></span> (<a
href="basic-objects-value-model.html#x8-240004.1">Section 4.1<!--tex4ht:ref: sec:lang:waituntil --></a>) — the garbage collector will reclaim memory if there
are no other use of <span class="lstinline"><span
class="cmtt-10x-x-109">Foo</span></span>. To remove the contents of <span class="lstinline"><span
class="cmtt-10x-x-109">Foo</span></span>, you remove all its slots one by
one:
</p><!--l. 82--><p class="indent" >   <div class="code urbiscript">
<!--l. 82--><pre class="listings"><span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-164008r1"></a></span><span class="textkwd"><span
class="cmtt-10x-x-109">class</span></span><span class="cmtt-10x-x-109"> Foo </span><br /><span class="label"><a
 id="x25-164009r2"></a></span><span class="cmtt-10x-x-109">{ </span><br /><span class="label"><a
 id="x25-164010r3"></a></span><span class="cmtt-10x-x-109">  </span><span class="textkwd"><span
class="cmtt-10x-x-109">var</span></span><span class="cmtt-10x-x-109"> a = 12; </span><br /><span class="label"><a
 id="x25-164011r4"></a></span><span class="cmtt-10x-x-109">  </span><span class="textkwd"><span
class="cmtt-10x-x-109">var</span></span><span class="cmtt-10x-x-109"> b = 23; </span><br /><span class="label"><a
 id="x25-164012r5"></a></span><span class="cmtt-10x-x-109">}|; </span><br /><span class="label"><a
 id="x25-164013r6"></a></span><span class="textkwd"><span
class="cmtt-10x-x-109">function</span></span><span class="cmtt-10x-x-109"> Object.removeAllSlots() </span><br /><span class="label"><a
 id="x25-164014r7"></a></span><span class="cmtt-10x-x-109">{ </span><br /><span class="label"><a
 id="x25-164015r8"></a></span><span class="cmtt-10x-x-109">  </span><span class="textkwd"><span
class="cmtt-10x-x-109">for</span></span><span class="cmtt-10x-x-109"> (</span><span class="textkwd"><span
class="cmtt-10x-x-109">var</span></span><span class="cmtt-10x-x-109"> s: localSlotNames()) </span><br /><span class="label"><a
 id="x25-164016r9"></a></span><span class="cmtt-10x-x-109">    removeLocalSlot(s); </span><br /><span class="label"><a
 id="x25-164017r10"></a></span><span class="cmtt-10x-x-109">}|; </span><br /><span class="label"><a
 id="x25-164018r11"></a></span><span class="cmtt-10x-x-109">Foo.removeAllSlots(); </span><br /><span class="label"><a
 id="x25-164019r12"></a></span><span class="cmtt-10x-x-109">Foo.localSlotNames(); </span><br /><span class="label"><a
 id="x25-164020r13"></a></span><!--l. 95--><span class="listings-nested"><span class="urbianswer"><span class="cmtt-10x-x-109">[00000000] []</span></span></span>
      <span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-164021r14"></a></span></pre>
   </div>
<!--l. 98--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">16.3   </span> <a
href="index.html#QQ2-25-172" id="x25-16500016.3">emit Foo</a></h3>
<!--l. 100--><p class="noindent" >The keyword <span class="lstinline"><span class="textkwd"><span
class="cmtt-10x-x-109">emit</span></span></span> is deprecated in favor of <span class="lstinline"><span
class="cmtt-10x-x-109">!</span></span>.
</p>
<div class="center"
>
<!--l. 102--><p class="noindent" >
</p>
<div class="tabular"> <table id="TBL-3" class="tabular"
cellspacing="0" cellpadding="0" rules="groups"
><colgroup id="TBL-3-1g"><col
id="TBL-3-1" /></colgroup><colgroup id="TBL-3-2g"><col
id="TBL-3-2" /></colgroup><tr
class="hline"><td><hr /></td><td><hr /></td></tr><tr
 style="vertical-align:baseline;" id="TBL-3-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-1"
class="td11"> <span
class="cmbx-10x-x-109">Deprecated        </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-2"
class="td11"> <span
class="cmbx-10x-x-109">Updated      </span></td>
</tr><tr
class="hline"><td><hr /></td><td><hr /></td></tr><tr
 style="vertical-align:baseline;" id="TBL-3-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-1"
class="td11"> <span class="lstinline"><!--l. 107--><p class="noindent" ><span class="textkwd"><span
class="cmtt-10x-x-109">emit</span></span><span class="cmtt-10x-x-109"> e;</span>                                                                         </span> </p> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-2"
class="td11"> <span class="lstinline"><!--l. 107--><p class="noindent" ><span class="cmtt-10x-x-109">e!;</span>                      </span> </p> </td>
</tr><tr
 style="vertical-align:baseline;" id="TBL-3-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-1"
class="td11"> <span class="lstinline"><!--l. 108--><p class="noindent" ><span class="textkwd"><span
class="cmtt-10x-x-109">emit</span></span><span class="cmtt-10x-x-109"> e(a);</span>                                                                      </span> </p> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-2"
class="td11"> <span class="lstinline"><!--l. 108--><p class="noindent" ><span class="cmtt-10x-x-109">e!(a);</span>                      </span> </p> </td>
</tr><tr
 style="vertical-align:baseline;" id="TBL-3-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-1"
class="td11"> <span class="lstinline"><!--l. 109--><p class="noindent" ><span class="textkwd"><span
class="cmtt-10x-x-109">emit</span></span><span class="cmtt-10x-x-109"> e </span><span
class="cmsy-10x-x-109">&sim;</span><span class="cmtt-10x-x-109"> 1s;</span>                                                                   </span> </p> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-2"
class="td11"> <span class="lstinline"><!--l. 109--><p class="noindent" ><span class="cmtt-10x-x-109">e! </span><span
class="cmsy-10x-x-109">&sim;</span><span class="cmtt-10x-x-109"> 1s;</span>                      </span> </p> </td>
</tr><tr
 style="vertical-align:baseline;" id="TBL-3-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-1"
class="td11"> <span class="lstinline"><!--l. 110--><p class="noindent" ><span class="textkwd"><span
class="cmtt-10x-x-109">emit</span></span><span class="cmtt-10x-x-109"> e(a) </span><span
class="cmsy-10x-x-109">&sim;</span><span class="cmtt-10x-x-109"> 1s;</span>                                                                </span> </p> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-2"
class="td11"> <span class="lstinline"><!--l. 110--><p class="noindent" ><span class="cmtt-10x-x-109">e!(a) </span><span
class="cmsy-10x-x-109">&sim;</span><span class="cmtt-10x-x-109"> 1s;</span>                      </span> </p> </td>
</tr><tr
class="hline"><td><hr /></td><td><hr /></td></tr><tr
 style="vertical-align:baseline;" id="TBL-3-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-6-1"
class="td11">                  </td></tr></table></div></div>
<!--l. 115--><p class="indent" >   The <span class="lstinline"><span
class="cmtt-10x-x-109">?</span></span> construct is changed for symmetry.
</p>
<div class="center"
>
<!--l. 117--><p class="noindent" >
</p>
<div class="tabular"> <table id="TBL-4" class="tabular"
cellspacing="0" cellpadding="0" rules="groups"
><colgroup id="TBL-4-1g"><col
id="TBL-4-1" /></colgroup><colgroup id="TBL-4-2g"><col
id="TBL-4-2" /></colgroup><tr
class="hline"><td><hr /></td><td><hr /></td></tr><tr
 style="vertical-align:baseline;" id="TBL-4-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-1"
class="td11"> <span
class="cmbx-10x-x-109">Deprecated                  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-2"
class="td11"> <span
class="cmbx-10x-x-109">Updated                       </span></td>
</tr><tr
class="hline"><td><hr /></td><td><hr /></td></tr><tr
 style="vertical-align:baseline;" id="TBL-4-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-1"
class="td11"> <span class="lstinline"><!--l. 122--><p class="noindent" ><span class="textkwd"><span
class="cmtt-10x-x-109">at</span></span><span class="cmtt-10x-x-109"> (?e)</span>                                                                         </span> </p> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-2"
class="td11"> <span class="lstinline"><!--l. 122--><p class="noindent" ><span class="textkwd"><span
class="cmtt-10x-x-109">at</span></span><span class="cmtt-10x-x-109"> (e?)</span>                              </span> </p> </td>
</tr><tr
 style="vertical-align:baseline;" id="TBL-4-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-1"
class="td11"> <span class="lstinline"><!--l. 123--><p class="noindent" ><span class="textkwd"><span
class="cmtt-10x-x-109">at</span></span><span class="cmtt-10x-x-109"> (?e(</span><span class="textkwd"><span
class="cmtt-10x-x-109">var</span></span><span class="cmtt-10x-x-109"> a))</span>                                                                  </span> </p> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-2"
class="td11"> <span class="lstinline"><!--l. 123--><p class="noindent" ><span class="textkwd"><span
class="cmtt-10x-x-109">at</span></span><span class="cmtt-10x-x-109"> (e?(</span><span class="textkwd"><span
class="cmtt-10x-x-109">var</span></span><span class="cmtt-10x-x-109"> a))</span>                              </span> </p> </td>
</tr><tr
 style="vertical-align:baseline;" id="TBL-4-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-4-1"
class="td11"> <span class="lstinline"><!--l. 124--><p class="noindent" ><span class="textkwd"><span
class="cmtt-10x-x-109">at</span></span><span class="cmtt-10x-x-109"> (?e(</span><span class="textkwd"><span
class="cmtt-10x-x-109">var</span></span><span class="cmtt-10x-x-109"> a) </span><span class="textkwd"><span
class="cmtt-10x-x-109">if</span></span><span class="cmtt-10x-x-109"> a == 2)</span>                                                        </span> </p> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-4-2"
class="td11"> <span class="lstinline"><!--l. 124--><p class="noindent" ><span class="textkwd"><span
class="cmtt-10x-x-109">at</span></span><span class="cmtt-10x-x-109"> (e?(</span><span class="textkwd"><span
class="cmtt-10x-x-109">var</span></span><span class="cmtt-10x-x-109"> a) </span><span class="textkwd"><span
class="cmtt-10x-x-109">if</span></span><span class="cmtt-10x-x-109"> a == 2)</span>                              </span> </p> </td>
</tr><tr
class="hline"><td><hr /></td><td><hr /></td></tr><tr
 style="vertical-align:baseline;" id="TBL-4-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-5-1"
class="td11">                          </td></tr></table></div></div>
<!--l. 130--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">16.4   </span> <a
href="index.html#QQ2-25-173" id="x25-16600016.4">eval(Foo)</a></h3>
<!--l. 131--><p class="noindent" ><span class="lstinline"><span
class="cmtt-10x-x-109">eval</span></span> is still supported, but its use is discouraged: one can often easily do without. For instance, <span class="lstinline"><span
class="cmtt-10x-x-109">eval</span></span>
was often used to manipulate forged identiﬁers; see <a
href="#x25-16300016.1">Section 16.1<!--tex4ht:ref: sec:lang:waituntil --></a> for means of getting rid of
them.
</p><!--l. 136--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">16.5   </span> <a
href="index.html#QQ2-25-174" id="x25-16700016.5">foreach</a></h3>
<!--l. 137--><p class="noindent" >The same feature with a slightly diﬀerent syntax is now provided by <span class="lstinline"><span class="textkwd"><span
class="cmtt-10x-x-109">for</span></span></span>. See <a
href="urbiscript-language-reference-manual.html#x31-32000020.7.6">Listing 20.7.6<!--tex4ht:ref: sec:lang:waituntil --></a>.
</p><!--l. 140--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">16.6   </span> <a
href="index.html#QQ2-25-175" id="x25-16800016.6">group</a></h3>
<!--l. 141--><p class="noindent" >Where support for groups was a built-in feature in urbiscript 1, it is now provided by the standard
library, see <a
href="urbiscript-standard-library.html#object:Group"><span class="lstinline"><span
class="cmtt-10x-x-109">Group</span></span></a>. Instead of <div class="code urbiunchecked">
<!--l. 143--><pre class="listings"><span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-168001r1"></a></span><span class="cmtt-10x-x-109">group myGroup {a, b, c}</span>
      <span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-168002r2"></a></span></pre>
   </div>
write <div class="code urbiunchecked">
      <!--l. 148--><pre class="listings"><span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-168003r1"></a></span><span class="textkwd"><span
class="cmtt-10x-x-109">var</span></span><span class="cmtt-10x-x-109"> myGroup = Group.new(a,b,c)</span>
      <span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-168004r2"></a></span></pre>
</div>
<!--l. 152--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">16.7   </span> <a
href="index.html#QQ2-25-176" id="x25-16900016.7">loopn</a></h3>
<!--l. 154--><p class="noindent" >The same feature and syntax is now provided by <span class="lstinline"><span class="textkwd"><span
class="cmtt-10x-x-109">for</span></span></span>. See <a
href="urbiscript-language-reference-manual.html#x31-32300020.7.7">Listing 20.7.7<!--tex4ht:ref: sec:lang:waituntil --></a>.
</p><!--l. 157--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">16.8   </span> <a
href="index.html#QQ2-25-177" id="x25-17000016.8">new Foo</a></h3>
<!--l. 159--><p class="noindent" >See <a
href="objective-programming-urbiscript-object-model.html#x11-450007.5">Section 7.5<!--tex4ht:ref: sec:lang:waituntil --></a> for details on <span class="lstinline"><span
class="cmtt-10x-x-109">new</span></span>. The construct <span class="lstinline"><span class="cmtt-10x-x-109">new Foo</span></span> is no longer supported because it is (too)
ambiguous: what does <span class="lstinline"><span class="cmtt-10x-x-109">new a(1,2).b(3,4)</span></span> mean? Is <span class="lstinline"><span class="cmtt-10x-x-109">a(1,2).b</span></span> the object to clone and <span class="lstinline"><span
class="cmtt-10x-x-109">(3,4)</span></span>
are the arguments of the constructor? Or is it the result of <span class="lstinline"><span class="cmtt-10x-x-109">a(1,2).b(3,4)</span></span> that must be
cloned?
</p><!--l. 166--><p class="indent" >   In temporary versions, urbiscript 2 used to support this <span class="lstinline"><span
class="cmtt-10x-x-109">new</span></span> construct, but too many users got it
wrong, and we decided to keep only the simpler, safer, and more consistent method-call-style construct:
<span class="lstinline"><span class="cmtt-10x-x-109">Foo.new</span></span>. Every single possible interpretation of <span class="lstinline"><span class="cmtt-10x-x-109">new a(1,2).b(3,4)</span></span> is reported below,
unambiguously. </p>
     <ul class="itemize1">
     <li class="itemize"><span class="lstinline"><span class="cmtt-10x-x-109">a(1,2).b(3,4).new</span></span>
     </li>
     <li class="itemize"><span class="lstinline"><span class="cmtt-10x-x-109">a(1,2).b.new(3,4)</span></span>
     </li>
     <li class="itemize"><span class="lstinline"><span class="cmtt-10x-x-109">a(1,2).new.b(3,4)</span></span>
     </li>
     <li class="itemize"><span class="lstinline"><span class="cmtt-10x-x-109">a.new(1,2).b(3,4)</span></span>
     </li>
     <li class="itemize"><span class="lstinline"><span class="cmtt-10x-x-109">new.a(1,2).b(3,4)</span></span></li></ul>
<!--l. 179--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">16.9   </span> <a
href="index.html#QQ2-25-178" id="x25-17100016.9">self</a></h3>
<!--l. 180--><p class="noindent" >For consistency with the C++ syntax, urbiscript now uses <span class="lstinline"><span class="textkwd"><span
class="cmtt-10x-x-109">this</span></span></span>.
</p><!--l. 182--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">16.10   </span> <a
href="index.html#QQ2-25-179" id="x25-17200016.10">stop Foo</a></h3>
<!--l. 184--><p class="noindent" >Use <span class="lstinline"><span class="cmtt-10x-x-109">Foo.stop</span></span> instead, see <a
href="urbiscript-standard-library.html#object:Tag"><span class="lstinline"><span
class="cmtt-10x-x-109">Tag</span></span></a>.
</p><!--l. 186--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">16.11   </span> <a
href="index.html#QQ2-25-180" id="x25-17300016.11"># line</a></h3>
<!--l. 188--><p class="noindent" >Use <span class="lstinline"><span class="textcmt"><span class="cmtt-10x-x-109">//#line</span></span></span> instead, see <a
href="urbiscript-language-reference-manual.html#x31-24900020.1.3">Section 20.1.3<!--tex4ht:ref: sec:lang:waituntil --></a>.
</p><!--l. 190--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">16.12   </span> <a
href="index.html#QQ2-25-181" id="x25-17400016.12">tag+end</a></h3>
<!--l. 192--><p class="noindent" >To detect the end of a statement, instead of
</p><!--l. 194--><p class="indent" >   <div class="code urbiunchecked">
<!--l. 194--><pre class="listings"><span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-174001r1"></a></span><span class="cmtt-10x-x-109">mytag+end: { echo (</span><!--l. 195--><span class="listings-nested"><span class="textstr"><span class="cmtt-10x-x-109">&#x0022;foo&#x0022;</span></span></span><span class="cmtt-10x-x-109">) },</span>
      <span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-174002r2"></a></span></pre>
   </div>
<!--l. 198--><p class="noindent" >use the <span class="lstinline"><span class="cmtt-10x-x-109">leave?</span></span> method of the <a
href="urbiscript-standard-library.html#object:Tag"><span class="lstinline"><span
class="cmtt-10x-x-109">Tag</span></span></a> object:
</p><!--l. 201--><p class="indent" >   <div class="code urbiscript">
<!--l. 201--><pre class="listings"><span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-174003r1"></a></span><span class="cmtt-10x-x-109">{ </span><br /><span class="label"><a
 id="x25-174004r2"></a></span><span class="cmtt-10x-x-109">  </span><span class="textkwd"><span
class="cmtt-10x-x-109">var</span></span><span class="cmtt-10x-x-109"> mytag = Tag.new(</span><!--l. 203--><span class="listings-nested"><span class="textstr"><span class="cmtt-10x-x-109">&#x0022;mytag&#x0022;</span></span></span><span class="cmtt-10x-x-109">); </span><br /><span class="label"><a
 id="x25-174005r3"></a></span><span class="cmtt-10x-x-109">  </span><span class="textkwd"><span
class="cmtt-10x-x-109">at</span></span><span class="cmtt-10x-x-109"> (mytag.leave?) </span><br /><span class="label"><a
 id="x25-174006r4"></a></span><span class="cmtt-10x-x-109">    Channel.new(</span><!--l. 205--><span class="listings-nested"><span class="textstr"><span class="cmtt-10x-x-109">&#x0022;mytag&#x0022;</span></span></span><span class="cmtt-10x-x-109">) &#x003C;&#x003C; </span><!--l. 205--><span class="listings-nested"><span class="textstr"><span class="cmtt-10x-x-109">&#x0022;code has finished&#x0022;</span></span></span><span class="cmtt-10x-x-109">; </span><br /><span class="label"><a
 id="x25-174007r5"></a></span><span class="cmtt-10x-x-109">  mytag: { echo (</span><!--l. 206--><span class="listings-nested"><span class="textstr"><span class="cmtt-10x-x-109">&#x0022;foo&#x0022;</span></span></span><span class="cmtt-10x-x-109">) }, </span><br /><span class="label"><a
 id="x25-174008r6"></a></span><span class="cmtt-10x-x-109">}; </span><br /><span class="label"><a
 id="x25-174009r7"></a></span><!--l. 208--><span class="listings-nested"><span class="urbianswer"><span class="cmtt-10x-x-109">[00000002] *** foo</span></span></span><span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-174010r8"></a></span><!--l. 209--><span class="listings-nested"><span class="urbianswer"><span class="cmtt-10x-x-109">[00000003:mytag] &#x0022;code has finished&#x0022;</span></span></span>
      <span
class="cmtt-10x-x-109"> </span><br /><span class="label"><a
 id="x25-174011r9"></a></span></pre>
   </div>
</body></html>